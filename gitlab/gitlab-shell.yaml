# yaml-language-server: $schema=https://raw.githubusercontent.com/chainguard-dev/apko/refs/heads/main/pkg/build/types/schema.json
include: gitlab/gitlab-base.yaml
contents:
  packages:
    - gitlab-shell=18.2.1-r0 # repo=wolfi
    - gitlab-shell-scripts-compat
    - gitlab-shell-scripts
    - gitlab-logger
    - gitlab-logger-compat
cmd: "/scripts/process-wrapper"
environment:
  CONFIG_TEMPLATE_DIRECTORY: /srv/gitlab-shell
  HOME: /home/git
  LANG: C.UTF-8
paths:
  - path: /srv/gitlab-shell
    type: directory
    uid: 1000
    gid: 1000
    permissions: 0o755
  - path: /var/log/gitlab-shell
    type: directory
    uid: 1000
    gid: 1000
    permissions: 0o755
  - path: /etc/ssh
    type: directory
    uid: 1000
    gid: 1000
    permissions: 0o755
