# yaml-language-server: $schema=https://raw.githubusercontent.com/chainguard-dev/apko/refs/heads/main/pkg/build/types/schema.json
include: wolfi.yaml
contents:
  packages:
    - gitlab-runner=18.2.1-r0 # repo=wolfi
    - gitlab-runner-oci-entrypoint
    - gitlab-docker-machine
    - git-lfs
    - git-lfs-config
    - bash
    - dumb-init
entrypoint:
   command: dumb-init -- /entrypoint
cmd: run --user=gitlab-runner --working-directory=/home/gitlab-runner
vcs-url: https://gitlab.com/gitlab-org/build/CNG
accounts:
  groups:
    - groupname: nonroot
      gid: 65533
  users:
    - username: gitlab-runner
      uid: 100
  run-as: gitlab-runner
paths:
  - path: /home/gitlab-runner
    type: directory
    uid: 100
    gid: 65533
    permissions: 0o755
